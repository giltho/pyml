include Stdlib.In_channel

let with_open_bin s f =
  let ic = open_bin s in
  Fun.protect
    ~finally:(fun () -> Stdlib.close_in_noerr ic)
    (fun () -> f ic)